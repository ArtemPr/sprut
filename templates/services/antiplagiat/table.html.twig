<div class="users-table-wrap table-responsive">

    {# dump(data) #}

    <table id="usersTable"
           class="users-table table card-table table-vcenter text-nowrap datatable">
        <thead>
        <tr>
            {% if table|default(false) %}
                {% for tbl in table %}
                    {% if tbl.3 == true %}
                        {% if tbl.1 == '' %}
                            <!-- th></th -->
                        {% else %}
                            {% if loop.first == 1 %}
                                <th>
                                    <a
                                        class="sort-icon is-{% if sort.current_sort|default(false) and sort.current_sort == tbl.0 %}desc{% elseif sort.current_sort|default(false) and sort.current_sort == (tbl.0~'__up') %}asc{% elseif sort.current_sort|default(false) == false %}asc{% else %}both{% endif %}"
                                        href="{{ path('service_antiplagiat') ~ sort.sort_link ~ tbl.0 }}{% if sort.current_sort|default(false) and sort.current_sort == tbl.0 %}__up{% endif %}"></a>
                                    {% if  tbl.1  == 'ID' %}
                                        <p class="th-name id-name">{{ tbl.1 }}</p>
                                    {% else %}
                                        <p class="th-name">{{ tbl.1 }}</p>
                                    {% endif %}
                                </th>
                            {% else %}
                                <th>
                                    <a
                                        class="sort-icon is-{% if sort.current_sort|default(false) and sort.current_sort == tbl.0 %}desc{% elseif sort.current_sort|default(false) and sort.current_sort == (tbl.0~'__up') %}asc{% else %}both{% endif %}"
                                        href="{{ path('service_antiplagiat') ~ sort.sort_link ~ tbl.0 }}{% if sort.current_sort|default(false) and sort.current_sort == tbl.0 %}__up{% endif %}"
                                    ></a>
                                    <p class="th-name"> {{ tbl.1 }}</p>
                                </th>
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endfor %}
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% if data|default(false) %}
            {% for data_item in data %}
                <tr data-string="{{ data_item.id }}"
                    class="user-table-row {% if loop.first %}is-selected{% endif %}">

                    <td>
                        <a href="{{ data_item.file }}" target="_blank">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-text" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                                <line x1="9" y1="9" x2="10" y2="9"></line>
                                <line x1="9" y1="13" x2="15" y2="13"></line>
                                <line x1="9" y1="17" x2="15" y2="17"></line>
                            </svg>
                        </a>
                    </td>
                    <td>{% if data_item.discipline %}{{ data_item.discipline.name | raw }}{% else %}&mdash;{% endif %}</td>
                    <td>{{ data_item.size }}</td>
                    <td>{% if data_item.author %}{{ data_item.author.fullname }}{% else %}&mdash;{% endif %}</td>
                    <td>{{ data_item.data_create | date('d/m/Y H:i') }}</td>
                    <td>{{ data_item.comment }}</td>
                    <td>{{ statuses[data_item.status]|default('-') }}</td>
                    <td>{{ data_item.plagiat_percent }}</td>
                    <td>
                        {% if data_item.result_file %}
                            <a href="{{ data_item.result_file }}" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-analytics" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                                    <line x1="9" y1="17" x2="9" y2="12"></line>
                                    <line x1="12" y1="17" x2="12" y2="16"></line>
                                    <line x1="15" y1="17" x2="15" y2="14"></line>
                                </svg>
                            </a>
                        {% else %}
                            &mdash;
                        {% endif %}
                    </td>
                    <td>
                        {% if data_item.result_date %}
                            {{ data_item.result_date | date('d/m/Y H:i') }}
                        {% else %}
                            &mdash;
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        {% endif %}
        </tbody>
    </table>
</div>

{% include 'block/paginator.html.twig' with {
    'path': path('service_antiplagiat')
}  %}
